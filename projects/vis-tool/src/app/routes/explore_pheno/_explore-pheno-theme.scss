@import '~@angular/material/theming';

@mixin explore-pheno-theme($theme) {
    $primary: map-get($theme,primary);
    $accent: map-get($theme,accent);
    $warn: map-get($theme,warn);
    $accent2: map-get($theme,accent2);

    $step-title-bg: mat-color($primary,800);
    $drawer-title-height: 36px;
    $drawer-padding: 15px;

    #explorePhenoSteps,
    #explorePhenoControls {
        display: flex;
        flex-direction: column;
        .component-anchor {
            // when creating dynamic components they are always inserted
            // as siblings, not children of the "anchor" which is odd
            // so need to wrap the anchors and then just keep them hidden
            // since they'll always just be empty DOM elements....
            display: none;
        }
        .drawer-contents {
            padding: $drawer-padding;
        }
        .drawer-title {
            display: flex;
            align-items: center;
            height: $drawer-title-height;
            .title-inner {
                padding-left: $drawer-padding;
                padding-right: $drawer-padding;
            }
        }
        .drawer-contents {
            flex-grow: 1;
        }
    }

    #explorePhenoSteps {
        $bg-color: mat-color($primary,50);
        $lighter-bg-color: lighten($bg-color,15%); // even lighter than the lightest the palette offers
        background-color: $lighter-bg-color; 
        box-shadow: 2px 0px 4px 0px rgba(0, 0, 0, 0.1);
        .drawer-title {
            background-color: $step-title-bg;
            color: mat-color($warn);
        }
        .drawer-contents {
            border-right: 1px solid darken($lighter-bg-color,4%);
        }

        $step-icon-w: 32px;

        .step-wrapper {
            position: relative;
            $step-lines-width: 4px;
            .step-lines {
                position: absolute;
                z-index: -1;
                border-left: $step-lines-width solid mat-color($accent2);
                height: 100%;
                margin-left: ($step-icon-w/2)-($step-lines-width/2);
                opacity: 0.45;
            }
        }

        .step-title {
            display: flex;
            align-items: center;
            &:hover {
                cursor: pointer;
            }
            step-icon {
                width: $step-icon-w;
                height: $step-icon-w;
                font-size: 1.35em;
                display: inline-block;
                position: relative;
                
                border-radius: 50%;
                color: #fff;
                // TODO states
                background-color: mat-color($warn);
                fa-icon {
                    position: absolute;
                    top: 50%;
                    right: 50%;
                    transform: translate(50%,-50%);
                }
            }
            .text {
                text-transform: uppercase;
                font-weight: 600;
                padding: 0px $drawer-padding;
            }
        }
        .step-host {
            margin-left: $step-icon-w + $drawer-padding;
        }

    }
    
    #explorePhenoControls {
        .drawer-title {
            justify-content: space-between;
            background-color: mat-color($warn);
            color: #fff;//mat-contrast($warn,500);
            .title-caret {
                $half-drawer-title-height: ($drawer-title-height/2);
                border-top: $half-drawer-title-height solid transparent;
                border-bottom: $half-drawer-title-height solid transparent;
                border-left: $half-drawer-title-height solid $step-title-bg;
            }
            .close-control {
                padding-right: 10px;
                &:hover {
                    cursor: pointer;
                }
            }
        }
        .control-host:not(.active-step) {
            display: none;
        }
    }

    #visualizationContainer {
        display: flex;
        align-items: center;
        background-color: mat-color($warn,100);

        // TODO not sure about this...
        padding: 15px;
    }
}